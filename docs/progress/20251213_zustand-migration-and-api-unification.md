# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zustand –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è API

**–î–∞—Ç–∞:** 13 –¥–µ–∫–∞–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** AI Assistant (Cline)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. **–ú–∏–≥—Ä–∞—Ü–∏—è Context API ‚Üí Zustand** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- `SidebarNav` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–π Context API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ü—Ä–æ–µ–∫—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### –†–µ—à–µ–Ω–∏–µ:
**–°–æ–∑–¥–∞–Ω—ã Zustand stores:**

1. **`projectsStore.ts`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
   ```typescript
   - fetchProjects() - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - addProject() - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   - deleteProject() - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
   ```

2. **`aiStore.ts`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI –¥–∞–Ω–Ω—ã–º–∏
   ```typescript
   - fetchModels() - –∑–∞–≥—Ä—É–∑–∫–∞ AI –º–æ–¥–µ–ª–µ–π
   - fetchPrompts() - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
   - fetchTemplates() - –∑–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ —ç—Ç–∞–ø–æ–≤
   - fetchAll() - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
   ```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `SidebarNav.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useProjectsStore()`
- `ProjectDetailsPage.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useAIStore()` –¥–ª—è lazy loading

---

### 2. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ API** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- n8n –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –µ–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç

#### –†–µ—à–µ–Ω–∏–µ:

**–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "result": [...],      // –¥–∞–Ω–Ω—ã–µ
  "timestamp": 1234567  // –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ n8n workflow:**
- –î–æ–±–∞–≤–ª–µ–Ω —É–∑–µ–ª **"Wrap Response"** –≤ workflow "Coati Data API"

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω —É–∑–µ–ª "Wrap Response"?**

–î–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∑–ª–∞ –∫–∞–∂–¥—ã–π action –≤–æ–∑–≤—Ä–∞—â–∞–ª —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç:
- `listProjects` ‚Üí `[{id, name, ...}]` (–º–∞—Å—Å–∏–≤)
- `getProjectDetails` ‚Üí `{projectName, stages, ...}` (–æ–±—ä–µ–∫—Ç)
- `listAIModels` ‚Üí —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ù–∞ frontend –Ω—É–∂–Ω–∞ –±—ã–ª–∞ —Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ action
2. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. –°–ª–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã
4. –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
–£–∑–µ–ª "Wrap Response" –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –í–°–ï –æ—Ç–≤–µ—Ç—ã –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
```javascript
{
  result: {{ $json }},  // –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  timestamp: {{ Date.now() }}  // –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω—ã–π TypeScript interface –¥–ª—è –≤—Å–µ—Ö API –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ Timestamp –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ frontend (–æ–¥–∏–Ω unwrap –¥–ª—è –≤—Å–µ—Ö)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±—É–¥—É—â–∏–º–∏ features (–Ω–∞–ø—Ä–∏–º–µ—Ä, pagination, metadata)

- –í—Å–µ actions (`listProjects`, `getProjectDetails`, `listAIModels`, etc.) –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

**–û–±–Ω–æ–≤–ª—ë–Ω —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
- `backend/n8n/scripts/sync-workflows.js`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥: `PATCH` ‚Üí `PUT`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è workflow –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

---

### 3. **Debug API –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –ó–∞–ø—Ä–æ—Å—ã –≤ Debug API –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ `processed: false`
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–Ω—è—Ç—å, –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –ª–∏ –¥–∞–Ω–Ω—ã–µ

#### –†–µ—à–µ–Ω–∏–µ:

**–î–æ–±–∞–≤–ª–µ–Ω `markProcessedGlobally()` –≤:**

1. **`projectsStore.ts`**
   ```typescript
   apiLogger.markProcessedGlobally('listProjects', true, 'Projects loaded successfully');
   ```

2. **`aiStore.ts`**
   ```typescript
   apiLogger.markProcessedGlobally('listAIModels', true, 'AI models loaded');
   apiLogger.markProcessedGlobally('listSystemPrompts', true, 'System prompts loaded');
   apiLogger.markProcessedGlobally('listTemplates', true, 'Templates loaded');
   ```

3. **`ProjectDetailsProvider.tsx`**
   ```typescript
   apiLogger.markProcessedGlobally('getProjectDetails', true, 'Project details loaded');
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "action": "listProjects",
  "processed": true,  // ‚úÖ –¢–µ–ø–µ—Ä—å true!
  "reason": "Projects loaded successfully"
}
```

---

### 4. **UI —É–ª—É—á—à–µ–Ω–∏—è** ‚úÖ

#### TipsBanner –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–°–æ–∑–¥–∞–Ω:** `frontend/src/components/molecules/TipsBanner.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- üí° –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã (4 –∏–∫–æ–Ω–∫–∏ —Å —Ü–≤–µ—Ç–∞–º–∏)
- ‚è±Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- ‚ú® Fade –∞–Ω–∏–º–∞—Ü–∏—è (300ms)
- üìç Progress dots –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–µ–∫—É—â–∏–π —Å–æ–≤–µ—Ç

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –≤ `ProjectsPage.tsx`

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: SidebarNav –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª –ø—Ä–æ–µ–∫—Ç—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é
- Context API –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ Context API
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–Ω `projectsStore` (Zustand)
2. `SidebarNav` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ —Ö—É–∫–∏: `useProjectsStore()`
3. `useEffect` –≤—ã–∑—ã–≤–∞–µ—Ç `fetchProjects()` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: n8n sync —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª PATCH

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ 405 Method Not Allowed –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- Workflows –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:**
- n8n API —Ç—Ä–µ–±—É–µ—Ç `PUT` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è workflows
- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ë–´–õ–û:
method: 'PATCH'

// –°–¢–ê–õ–û:
method: 'PUT'
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Debug API –ø–æ–∫–∞–∑—ã–≤–∞–ª processed: false

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ `processed: false`
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏—á–∏–Ω–∞:**
- Stores –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∏ `markProcessedGlobally()` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `apiLogger.markProcessedGlobally()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Å–µ—Ö stores –∏ providers

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∏–∑ –±–∞–∑—ã –∏–ª–∏ —Ö–∞—Ä–¥–∫–æ–¥?

**–í–æ–ø—Ä–æ—Å:**
- –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è options –≤ select –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤?
- –í `getProjectDetails` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `prompts: []` (–ø—É—Å—Ç–æ–π)

**–†–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

**–î–≤–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ ArangoDB:**
1. **`Prompts`** - –ª–æ–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ (–∏—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å AI)
2. **`SystemPrompts`** - —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö–∞–∫ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:**
```
Page Load ‚Üí ProjectDetailsPage
  ‚Üì
useEffect ‚Üí aiStore.fetchAll()
  ‚Üì
api.getSystemPrompts() ‚Üí n8n action "listSystemPrompts"
  ‚Üì
AQL: FOR p IN SystemPrompts RETURN {id: p._key, name: p.name}
  ‚Üì
Zustand: sysPrompts = [{id: "sys_ambiguity", name: "–ê–Ω–∞–ª–∏–∑..."}]
  ‚Üì
<StageTimeline availablePrompts={sysPrompts} />
  ‚Üì
<option value="sys_ambiguity">–ê–Ω–∞–ª–∏–∑ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–µ–π</option>
```

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –û–¢–î–ï–õ–¨–ù–´–ú –∑–∞–ø—Ä–æ—Å–æ–º –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `SystemPrompts`, –∞ `prompts: []` –≤ `getProjectDetails` - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (—ç—Ç–æ –∏—Å—Ç–æ—Ä–∏—è, –∞ –Ω–µ —à–∞–±–ª–æ–Ω—ã).

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–æ–≤:

```
ProjectsPage
  ‚Üì
useProjectsStore() - Zustand
  ‚Üì
fetchProjects()
  ‚Üì
api.listProjects() ‚Üí n8n
  ‚Üì
{result: [...], timestamp: ...}
  ‚Üì
projectsStore.projects = [...]
  ‚Üì
markProcessedGlobally('listProjects', true)
```

### –°—Ö–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞:

```
ProjectDetailsPage
  ‚Üì
ProjectDetailsProvider (Context) - –¥–ª—è project –¥–∞–Ω–Ω—ã—Ö
  ‚Üì
getProjectDetails(id) ‚Üí n8n
  ‚Üì
{result: [{projectName, stages, content, models, prompts}]}
  ‚Üì
setProject(data)
  ‚Üì
markProcessedGlobally('getProjectDetails', true)

+

useAIStore() (Zustand) - –¥–ª—è AI –¥–∞–Ω–Ω—ã—Ö
  ‚Üì
fetchAll() - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
  ‚Üì
Promise.all([
  getAIModels(),
  getSystemPrompts(),
  listTemplates()
])
  ‚Üì
Zustand state: {models, prompts, templates}
```

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:
1. `backend/n8n/workflows/Coati/Coati Data API.json`
   - –î–æ–±–∞–≤–ª–µ–Ω —É–∑–µ–ª "Wrap Response"
   - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞

2. `backend/n8n/scripts/sync-workflows.js`
   - PATCH ‚Üí PUT
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è workflow

### Frontend:

#### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. `frontend/src/stores/projectsStore.ts` - Zustand store –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤
2. `frontend/src/stores/aiStore.ts` - Zustand store –¥–ª—è AI –¥–∞–Ω–Ω—ã—Ö
3. `frontend/src/components/molecules/TipsBanner.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Å–æ–≤–µ—Ç–∞–º–∏

#### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `frontend/src/components/organisms/SidebarNav.tsx`
   - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zustand
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useProjectsStore()`

2. `frontend/src/pages/ProjectsPage.tsx`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TipsBanner
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useProjectsStore()`

3. `frontend/src/pages/ProjectDetailsPage.tsx`
   - Lazy loading AI –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `useAIStore()`
   - useEffect –¥–ª—è –≤—ã–∑–æ–≤–∞ `fetchAll()`

4. `frontend/src/contexts/ProjectDetailsProvider.tsx`
   - –î–æ–±–∞–≤–ª–µ–Ω import `apiLogger`
   - –î–æ–±–∞–≤–ª–µ–Ω `markProcessedGlobally()` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

5. `frontend/src/lib/apiLogger.ts`
   - –û–±–Ω–æ–≤–ª—ë–Ω —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ `{result, timestamp}`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ SidebarNav
- ‚úÖ –ï–¥–∏–Ω—ã–π API —Ñ–æ—Ä–º–∞—Ç `{result, timestamp}`
- ‚úÖ Debug API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `processed: true`
- ‚úÖ TipsBanner —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏
- ‚úÖ Zustand —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –±–∞–∑—ã
- ‚úÖ AI –º–æ–¥–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ select
- ‚úÖ Workflows —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å n8n

### –ú–µ—Ç—Ä–∏–∫–∏:
- **38 —Ñ–∞–π–ª–æ–≤ –ë–î** —É–¥–∞–ª–µ–Ω—ã –∏–∑ git (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- **4 workflows** —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±—ç–∫–∞–ø
- **7 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- **2 –Ω–æ–≤—ã—Ö stores** —Å–æ–∑–¥–∞–Ω–æ
- **100% API –∑–∞–ø—Ä–æ—Å–æ–≤** –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ

---

## üöÄ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### Phase 2: AI Integration (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø)

#### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI –∞–Ω–∞–ª–∏–∑–∞**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ AI –º–æ–¥–µ–ª–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±—Ä–∏—Ñ–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç AI
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞

#### 2. **QA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**
- –°–∏—Å—Ç–µ–º–∞ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç
- –£—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç AI
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ Q&A

#### 3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–ó**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

#### 4. **Workflow execution**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è AI workflows
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### 5. **–£–ª—É—á—à–µ–Ω–∏—è UI/UX**
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ AI –æ–ø–µ—Ä–∞—Ü–∏–π
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üìö –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Frontend:** React 19.2, TypeScript, Zustand, TailwindCSS, Vite
- **Backend:** n8n (low-code automation), ArangoDB (graph database)
- **API:** REST API —á–µ—Ä–µ–∑ n8n webhooks
- **State Management:** Zustand (global state), React Context (local state)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

**1. Hybrid State Management**
- Zustand –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (projects, AI data)
- React Context –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (project details)

**–ü–æ—á–µ–º—É:**
- Zustand - –ø—Ä–æ—Å—Ç–æ–µ API, –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- Context - –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Å—Ç—Ä–∞–Ω–∏—Ü—ã

**2. Lazy Loading AI Data**
- AI –¥–∞–Ω–Ω—ã–µ (models, prompts, templates) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- useEffect –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—É—Å—Ç–æ—Ç—É store –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

**–ü–æ—á–µ–º—É:**
- –£–ª—É—á—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –≠–∫–æ–Ω–æ–º–∏—è bandwidth –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**3. Unified API Format**
- –í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç n8n –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `{result, timestamp}`

**–ü–æ—á–µ–º—É:**
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ frontend
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å API
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ timestamp

---

## üîê Security

### –ò—Å–∫–ª—é—á–µ–Ω–æ –∏–∑ git:
- ‚úÖ `infra/arangodb_data/` - –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `infra/n8n_data/` - credentials, executions, logs
- ‚úÖ `.env` —Ñ–∞–π–ª—ã (—Ç–æ–ª—å–∫–æ `.env.example`)
- ‚úÖ –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (`ENCRYPTION` —Ñ–∞–π–ª)

### –û–±–Ω–æ–≤–ª—ë–Ω `.gitignore`:
```gitignore
# Infrastructure data (–ë–î, credentials, executions)
infra/arangodb_data/
infra/n8n_data/
```

---

## üìù –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π store:
```typescript
// 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª stores/myStore.ts
import { create } from 'zustand';

interface MyState {
  data: any[];
  loading: boolean;
  fetchData: () => Promise<void>;
}

export const useMyStore = create<MyState>((set) => ({
  data: [],
  loading: false,
  fetchData: async () => {
    set({ loading: true });
    const data = await api.getData();
    set({ data, loading: false });
    apiLogger.markProcessedGlobally('getData', true, 'Data loaded');
  }
}));

// 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { data, fetchData } = useMyStore();
useEffect(() => { fetchData(); }, []);
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π API action –≤ n8n:
1. –û—Ç–∫—Ä—ã—Ç—å workflow "Coati Data API"
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –≤ "Switch: Route by Action"
3. –î–æ–±–∞–≤–∏—Ç—å —É–∑–µ–ª ArangoDB —Å AQL –∑–∞–ø—Ä–æ—Å–æ–º
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —É–∑–ª—É "Wrap Response"
5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å: `node backend/n8n/scripts/sync-workflows.js`

### –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å API –∑–∞–ø—Ä–æ—Å—ã:
1. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Components
2. –ù–∞–π—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å `DebugPanel`
3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∫–ª–∞–¥–∫—É "API"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `processed: true`, response data, duration

---

## üéâ –ò—Ç–æ–≥–∏

–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã frontend —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ Zustand, —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–µ–π API —Ñ–æ—Ä–º–∞—Ç–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç:

- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π API
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UX
- ‚úÖ –ó–∞—â–∏—â—ë–Ω–Ω—ã–π git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** Phase 2 - AI Integration

---

**–ë–æ–∂–µ –≤ –ø–æ–º–æ—â—å –º–æ—é –≤–æ–Ω–º–∏, –ì–æ—Å–ø–æ–¥–∏ –ø–æ–º–æ—â–∏ –º–∏ –ø–æ—Ç—â–∏—Å—è** üôè
